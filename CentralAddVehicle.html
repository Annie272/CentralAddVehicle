<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Safeco Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css" />
    <style>
      .hidden { display: none; }
      .star { color: #ef4444; margin-left: 2px; }
      .modal-bg { background: rgba(0,0,0,0.4);}
    </style>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
    <form
      id="mainForm"
      action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00DU7000006EuID"
      method="POST"
      class="bg-white p-8 rounded-2xl shadow-md w-full max-w-xl space-y-8 relative"
      autocomplete="off"
      novalidate
    >
      <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
        Add Vehicle Central Insurance Form
      </h2>

      <!-- Policy Changes Section -->
      <section class="bg-gray-50 border rounded-xl p-6 shadow-inner" aria-label="Policy Changes Section">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">Policy Changes</h3>

        <div class="mb-4">
          <label for="email" class="block text-sm font-medium text-gray-700">
            Email<span class="star">*</span>
          </label>
          <input
            type="email"
            id="email"
            name="email"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            autocomplete="off"
          />
        </div>

        <fieldset class="mb-4">
          <legend class="block text-sm font-medium text-gray-700 mb-1">
            Is this a quote or a change request?<span class="star">*</span>
          </legend>
          <div class="flex space-x-6">
            <label class="inline-flex items-center">
              <input type="radio" name="00NU7000006IOzh" value="Y" class="mr-2" />Yes
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="00NU7000006IOzh" value="N" class="mr-2" />No
            </label>
          </div>
        </fieldset>

        <input type="hidden" name="00NU7000005zuNN" id="00NU7000005zuNN" value="Add Vehicle" />

        <div class="mb-4">
          <label for="00NU7000005zuX3" class="block text-sm font-medium text-gray-700">
            Policy Number<span class="star">*</span>
          </label>
          <input
            type="text"
            id="00NU7000005zuX3"
            name="00NU7000005zuX3"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm"
            autocomplete="off"
          />
        </div>

        <div class="mb-4">
          <label for="00NU7000005zuLl" class="block text-sm font-medium text-gray-700">
            Effective Date (MM/DD/YYYY)<span class="star">*</span>
          </label>
          <input
            type="text"
            id="00NU7000005zuLl"
            name="00NU7000005zuLl"
            placeholder="MM/DD/YYYY"
            maxlength="10"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            autocomplete="off"
          />
        </div>
      </section>

      <!-- Vehicle Details Section -->
      <section class="bg-gray-50 border rounded-xl p-6 shadow-inner" aria-label="Vehicle Details Section">
        <h3 class="text-xl font-semibold mb-4 text-gray-700">
          Vehicle Details
        </h3>
        <!-- Type of Vehicle -->
        <div class="mb-4">
          <label for="00NU700000762BB" class="block text-sm font-medium text-gray-700">
            Type of Vehicle<span class="star">*</span>
          </label>
          <select id="00NU700000762BB" name="00NU700000762BB" title="Type of Vehicle"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
            <option value="">--None--</option>
            <option value="Private Passenger (all symbol rated vehicles)">Private Passenger (all symbol rated vehicles)</option>
            <option value="Pickup (non symbol rated)">Pickup (non symbol rated)</option>
            <option value="Van (non symbol rated)">Van (non symbol rated)</option>
            <option value="Limited Use Auto">Limited Use Auto</option>
            <option value="Motorhome">Motorhome</option>
            <option value="Recreational Trailer">Recreational Trailer</option>
            <option value="Utility/All Other Trailers">Utility/All Other Trailers</option>
            <option value="All Terrain Vehicle">All Terrain Vehicle</option>
            <option value="Golf Cart">Golf Cart</option>
            <option value="Snowmobile">Snowmobile</option>
          </select>
        </div>
        <!-- VIN Number of New Vehicle -->
        <div class="mb-4">
          <label for="00NU7000006Knh3" class="block text-sm font-medium text-gray-700">
            VIN Number of New Vehicle<span class="star">*</span>
          </label>
          <input
            id="00NU7000006Knh3"
            name="00NU7000006Knh3"
            maxlength="255"
            size="20"
            type="text"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm"
            autocomplete="off"
          />
        </div>
        <!-- Purchase Date -->
        <div class="mb-4">
          <label for="00NU7000007Aop9" class="block text-sm font-medium text-gray-700">
            Purchase Date<span class="star">*</span>
          </label>
          <span class="dateInput dateOnlyInput">
            <input
              id="00NU7000007Aop9"
              name="00NU7000007Aop9"
              size="12"
              type="text"
              placeholder="MM/DD/YYYY"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
              autocomplete="off"
            />
          </span>
        </div>
        <!-- Vehicle Use -->
        <div class="mb-4">
          <label for="00NU7000006N0iD" class="block text-sm font-medium text-gray-700">
            Vehicle Use<span class="star">*</span>
          </label>
          <select id="00NU7000006N0iD" name="00NU7000006N0iD" title="Vehicle Use"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
            <option value="">--None--</option>
            <option value="Pleasure (0-2 Miles One Way)">Pleasure (0-2 Miles One Way)</option>
            <option value="Work Less than 15 Miles One Way">Work Less than 15 Miles One Way</option>
            <option value="Work 15 Miles or More One Way">Work 15 Miles or More One Way</option>
            <option value="Business">Business</option>
            <option value="Farm">Farm</option>
          </select>
        </div>
        <!-- Annual Miles -->
        <div class="mb-4">
          <label for="00NU7000006N0zx" class="block text-sm font-medium text-gray-700">
            Annual Miles<span class="star">*</span>
          </label>
          <input
            id="00NU7000006N0zx"
            name="00NU7000006N0zx"
            maxlength="255"
            size="20"
            type="text"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm"
            autocomplete="off"
          />
        </div>
      </section>
      
     <!-- Coverages Section -->
<section class="bg-gray-50 border rounded-xl p-6 shadow-inner" aria-label="Coverages Section">
  <h3 class="text-xl font-semibold mb-4 text-gray-700">
    Coverages
  </h3>
  <div class="mb-4">
    <label for="00NU7000007ALC1" class="block text-sm font-medium text-gray-700">
      Other than Collision<span class="star">*</span>
    </label>
    <select id="00NU7000007ALC1" name="00NU7000007ALC1" title="Other than Collision"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="">--None--</option>
      <option value="No Coverage (Not applicable when loan or lease apply)">No Coverage (Not applicable when loan or lease apply)</option>
      <option value="Full Coverage">Full Coverage</option>
      <option value="50 Deductible">50 Deductible</option>
      <option value="100 Deductible">100 Deductible</option>
      <option value="200 Deductible">200 Deductible</option>
      <option value="250 Deductible">250 Deductible</option>
      <option value="500 Deductible">500 Deductible</option>
      <option value="1,000 Deductible">1,000 Deductible</option>
      <option value="1,500 Deductible">1,500 Deductible</option>
      <option value="2,000 Deductible">2,000 Deductible</option>
      <option value="2,500 Deductible">2,500 Deductible</option>
      <option value="5,000 Deductible">5,000 Deductible</option>
      <option value="10,000 Deductible">10,000 Deductible</option>
      <option value="50 Deductible with Full Coverage Glass">50 Deductible with  Full Coverage Glass</option>
      <option value="100 Deductible with Full Coverage Glass">100 Deductible with  Full Coverage Glass</option>
      <option value="200 Deductible with Full Coverage Glass">200 Deductible with Full Coverage Glass</option>
      <option value="250 Deductible with Full Coverage Glass">250 Deductible with  Full Coverage Glass</option>
      <option value="500 Deductible with Full Coverage Glass">500 Deductible with Full Coverage Glass</option>
      <option value="1,000 Deductible with Full Coverage Glass">1,000 Deductible with Full Coverage Glass</option>
      <option value="1,500 Deductible with Full Coverage Glass">1,500 Deductible with Full Coverage Glass</option>
      <option value="2,000 Deductible with Full Coverage Glass">2,000 Deductible with Full Coverage Glass</option>
      <option value="2,500 Deductible with Full Coverage Glass">2,500 Deductible with Full Coverage Glass</option>
      <option value="5,000 Deductible with Full Coverage Glass">5,000 Deductible with Full Coverage Glass</option>
      <option value="10,000 Deductible with Full Coverage Glass">10,000 Deductible with Full Coverage Glass</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU700000618cn" class="block text-sm font-medium text-gray-700">
      Collision<span class="star">*</span>
    </label>
    <select id="00NU700000618cn" name="00NU700000618cn" title="Collision"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="No Coverage (Not applicable when loan or lease apply)">No Coverage (Not applicable when loan or lease apply)</option>
      <option value="100 Deductible">100 Deductible</option>
      <option value="200 Deductible">200 Deductible</option>
      <option value="250 Deductible">250 Deductible</option>
      <option value="500 Deductible">500 Deductible</option>
      <option value="1,000 Deductible">1,000 Deductible</option>
      <option value="1,500 Deductible">1,500 Deductible</option>
      <option value="2,000 Deductible">2,000 Deductible</option>
      <option value="2,500 Deductible">2,500 Deductible</option>
      <option value="5,000 Deductible">5,000 Deductible</option>
      <option value="10,000 Deductible">10,000 Deductible</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU7000007AORd" class="block text-sm font-medium text-gray-700">
      Extended Transportation<span class="star">*</span>
    </label>
    <select id="00NU7000007AORd" name="00NU7000007AORd" title="Extended Transportation"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="30 Per Day / 900 Maximum (Included if comp. or coll. on vehicle)">30 Per Day / 900 Maximum (Included if comp. or coll. on vehicle)</option>
      <option value="40 Per Day / 1200 Maximum">40 Per Day / 1200 Maximum</option>
      <option value="50 Per Day / 1500 Maximum">50 Per Day / 1500 Maximum</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU7000007ALrx" class="block text-sm font-medium text-gray-700">
      Towing and Labor<span class="star">*</span>
    </label>
    <select id="00NU7000007ALrx" name="00NU7000007ALrx" title="Towing and Labor"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="No Towing and Labor">No Towing and Labor</option>
      <option value="25 Per Disablement">25 Per Disablement</option>
      <option value="50 Per Disablement">50 Per Disablement</option>
      <option value="75 Per Disablement">75 Per Disablement</option>
      <option value="100 Per Disablement">100 Per Disablement</option>
      <option value="150 Per Disablement">150 Per Disablement</option>
      <option value="200 Per Disablement">200 Per Disablement</option>
      <option value="250 Per Disablement">250 Per Disablement</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU7000007AP9B" class="block text-sm font-medium text-gray-700">
      Excess Electronic Equipment<span class="star">*</span>
    </label>
    <select id="00NU7000007AP9B" name="00NU7000007AP9B" title="Excess Electronic Equipment"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="No Excess Electronic Equipment Coverage">No Excess Electronic Equipment Coverage</option>
      <option value="1500 maximum limit of liability">1500 maximum limit of liability</option>
      <option value="2000 maximum limit of liability">2000 maximum limit of liability</option>
      <option value="2500 maximum limit of liability">2500 maximum limit of liability</option>
      <option value="3000 maximum limit of liability">3000 maximum limit of liability</option>
      <option value="3500 maximum limit of liability">3500 maximum limit of liability</option>
      <option value="4000 maximum limit of liability">4000 maximum limit of liability</option>
      <option value="4500 maximum limit of liability">4500 maximum limit of liability</option>
      <option value="5000 maximum limit of liability">5000 maximum limit of liability</option>
      <option value="5500 maximum limit of liability">5500 maximum limit of liability</option>
      <option value="6000 maximum limit of liability">6000 maximum limit of liability</option>
      <option value="6500 maximum limit of liability">6500 maximum limit of liability</option>
      <option value="7000 maximum limit of liability">7000 maximum limit of liability</option>
      <option value="7500 maximum limit of liability">7500 maximum limit of liability</option>
      <option value="8000 maximum limit of liability">8000 maximum limit of liability</option>
      <option value="8500 maximum limit of liability">8500 maximum limit of liability</option>
      <option value="9000 maximum limit of liability">9000 maximum limit of liability</option>
      <option value="9500 maximum limit of liability">9500 maximum limit of liability</option>
      <option value="10000 maximum limit of liability">10000 maximum limit of liability</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU7000007APab" class="block text-sm font-medium text-gray-700">
      Lease/Loan Guard<span class="star">*</span>
    </label>
    <select id="00NU7000007APab" name="00NU7000007APab" title="Lease/Loan Guard"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="No Lease/Loan Guard">No Lease/Loan Guard</option>
      <option value="Lease Guard">Lease Guard</option>
      <option value="Loan Guard">Loan Guard</option>
    </select>
  </div>
  <div class="mb-4">
    <label for="00NU7000007APfR" class="block text-sm font-medium text-gray-700">
      Trip Interruption Coverage<span class="star">*</span>
    </label>
    <select id="00NU7000007APfR" name="00NU7000007APfR" title="Trip Interruption Coverage"
      class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm">
      <option value="">--None--</option>
      <option value="No Trip Interruption Coverage">No Trip Interruption Coverage</option>
      <option value="600 Trip Interruption Coverage">600 Trip Interruption Coverage</option>
    </select>
  </div>
</section>



      <!-- Hidden Salesforce fields -->
      <input type="hidden" name="oid" value="00DU7000006EuID" />
      <input type="hidden" name="recordType" id="recordType" value="012U7000003IoO1IAK" />
      <input type="hidden" name="retURL" value="https://bennettandporter.com/" />
      <input type="hidden" name="first_name" value="Central Add Vehicle Trial" />
      <input type="hidden" name="last_name" value="Test Demo" />
      <input type="hidden" name="status" value="New" />
      <input type="hidden" name="phone" value="28436836129" />
      <input type="hidden" name="lead_source" value="Web Form" />
      <input type="hidden" name="company" value="Caelius Test Central Add Vehicle" />
      <input type="hidden" name="Debug_Notes__c" value="Safeco Test: 2025-06-27 07:21AM" />

      <div class="flex justify-end mt-6">
        <button
          type="button"
          id="reviewBtn"
          class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-blue-700 transition"
        >
          Review and Submit
        </button>
      </div>
    </form>

    <!-- Confirmation Dialog -->
    <div
      id="dialog"
      class="hidden fixed inset-0 flex items-center justify-center modal-bg z-50"
      role="dialog"
      aria-modal="true"
      aria-labelledby="dialogTitle"
    >
      <div class="bg-white rounded-lg p-6 max-w-md w-full shadow-lg text-gray-800">
        <h3 id="dialogTitle" class="text-lg font-semibold mb-4"></h3>
        <ul id="missingFieldsList" class="mb-4 text-red-600 text-sm"></ul>
        <div class="flex justify-end space-x-3" id="dialogButtons">
          <button
            id="proceedBtn"
            class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 font-medium"
          >
            Proceed to End Request
          </button>
          <button
            id="editBtn"
            class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 font-medium"
          >
            Edit
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Pikaday for Effective Date
        new Pikaday({
          field: document.getElementById("00NU7000005zuLl"),
          format: "MM/DD/YYYY",
          toString(date) {
            const day = String(date.getDate()).padStart(2, "0");
            const month = String(date.getMonth() + 1).padStart(2, "0");
            const year = date.getFullYear();
            return `${month}/${day}/${year}`;
          },
          parse(dateString) {
            const [month, day, year] = dateString.split("/");
            return new Date(year, month - 1, day);
          },
        });

        // Pikaday for Purchase Date
        new Pikaday({
          field: document.getElementById("00NU7000007Aop9"),
          format: "MM/DD/YYYY",
          toString(date) {
            const day = String(date.getDate()).padStart(2, "0");
            const month = String(date.getMonth() + 1).padStart(2, "0");
            const year = date.getFullYear();
            return `${month}/${day}/${year}`;
          },
          parse(dateString) {
            const [month, day, year] = dateString.split("/");
            return new Date(year, month - 1, day);
          },
        });

        const requiredFields = [
  { id: "email", label: "Email", type: "email" },
  { radioGroupName: "00NU7000006IOzh", label: "Is this a quote or a change request?" },
  { id: "00NU7000005zuX3", label: "Policy Number" },
  { id: "00NU7000005zuLl", label: "Effective Date (MM/DD/YYYY)", type: "date" },
  { id: "00NU700000762BB", label: "Type of Vehicle" },
  { id: "00NU7000006Knh3", label: "VIN Number of New Vehicle" },
  { id: "00NU7000007Aop9", label: "Purchase Date", type: "date" },
  { id: "00NU7000006N0iD", label: "Vehicle Use" },
  { id: "00NU7000006N0zx", label: "Annual Miles" },
  { id: "00NU7000007ALC1", label: "Other than Collision" },
  { id: "00NU700000618cn", label: "Collision" },
  { id: "00NU7000007AORd", label: "Extended Transportation" },
  { id: "00NU7000007ALrx", label: "Towing and Labor" },
  { id: "00NU7000007AP9B", label: "Excess Electronic Equipment" },
  { id: "00NU7000007APab", label: "Lease/Loan Guard" },
  { id: "00NU7000007APfR", label: "Trip Interruption Coverage" },
];

// Form validation function remains same and covers these new fields by checking non-empty value
function validateFields() {
  const missing = [];
  requiredFields.forEach((field) => {
    if (field.radioGroupName) {
      const radios = document.querySelectorAll(`input[name="${field.radioGroupName}"]`);
      const checked = [...radios].some((r) => r.checked);
      if (!checked) missing.push(field.label);
    } else if (field.type === "email") {
      const el = document.getElementById(field.id);
      if (!el.value.trim() || !el.checkValidity()) missing.push(field.label);
    } else if (field.type === "date") {
      const val = document.getElementById(field.id).value.trim();
      const dateRegex = /^(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01])\/20[2-9]\d$/; 
      if (!val || !dateRegex.test(val)) missing.push(field.label);
    } else {
      const el = document.getElementById(field.id);
      if (!el || !el.value.trim()) missing.push(field.label);
    }
  });
  return missing;
}


        const form = document.getElementById("mainForm");
        const reviewBtn = document.getElementById("reviewBtn");
        const dialog = document.getElementById("dialog");
        const dialogTitle = document.getElementById("dialogTitle");
        const missingFieldsList = document.getElementById("missingFieldsList");
        const proceedBtn = document.getElementById("proceedBtn");
        const editBtn = document.getElementById("editBtn");

        form.addEventListener("submit", (e) => e.preventDefault());

        reviewBtn.addEventListener("click", () => {
          const missing = validateFields();
          if (missing.length) {
            dialogTitle.textContent =
              "Below Mandatory Fields are missing and the Team will contact you shortly.";
            missingFieldsList.innerHTML = missing
              .map((f) => `<li>${f}</li>`)
              .join("");
          } else {
            dialogTitle.textContent =
              "All mandatory fields are completed. Ready to submit your request?";
            missingFieldsList.innerHTML = "";
          }
          dialog.classList.remove("hidden");
        });

        editBtn.addEventListener("click", () => {
          dialog.classList.add("hidden");
        });

        proceedBtn.addEventListener("click", () => {
          dialog.classList.add("hidden");
          form.submit();
        });

        window.addEventListener("click", (e) => {
          if (e.target === dialog) {
            dialog.classList.add("hidden");
          }
        });

        window.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && !dialog.classList.contains("hidden")) {
            dialog.classList.add("hidden");
          }
        });

        function validateFields() {
          const missing = [];
          requiredFields.forEach((field) => {
            if (field.radioGroupName) {
              const radios = document.querySelectorAll(`input[name="${field.radioGroupName}"]`);
              const checked = [...radios].some((r) => r.checked);
              if (!checked) missing.push(field.label);
            } else if (field.type === "email") {
              const el = document.getElementById(field.id);
              if (!el.value.trim() || !el.checkValidity()) missing.push(field.label);
            } else if (field.type === "date") {
              const val = document.getElementById(field.id).value.trim();
              const dateRegex = /^(0[1-9]|1[0-2])\/(0[1-9]|[12]\d|3[01])\/20[2-9]\d$/;
              if (!val || !dateRegex.test(val)) missing.push(field.label);
            } else {
              const el = document.getElementById(field.id);
              if (!el || !el.value.trim()) missing.push(field.label);
            }
          });
          return missing;
        }
      });
    </script>
  </body>
</html>
